import{S as De,H as Le,V as O,C as U,A as Ge,a as Oe,j as ve}from"./flowGraphSceneTickEventBlock.jsKt_esu.js";import{Z as Re,z as He,B as pe}from"./anu.BEFiqz5l.js";import"./transform.bqJWYwjj.js";import{o as Ve}from"./ordinal.Cn4HJ1r5.js";var Je={value:()=>{}};function $e(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new ee(r)}function ee(e){this._=e}function Xe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}ee.prototype=$e.prototype={constructor:ee,on:function(e,t){var r=this._,n=Xe(e+"",r),a,i=-1,u=n.length;if(arguments.length<2){for(;++i<u;)if((a=(e=n[i]).type)&&(a=Ye(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<u;)if(a=(e=n[i]).type)r[a]=xe(r[a],e.name,t);else if(t==null)for(a in r)r[a]=xe(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new ee(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,i;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,i=n.length;a<i;++a)n[a].value.apply(t,r)}};function Ye(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function xe(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Je,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var V=0,X=0,J=0,be=1e3,te,Y,re=0,H=0,ne=0,Z=typeof performance=="object"&&performance.now?performance:Date,Ie=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qe(){return H||(Ie(Ze),H=Z.now()+ne)}function Ze(){H=0}function ue(){this._call=this._time=this._next=null}ue.prototype=Ce.prototype={constructor:ue,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?qe():+r)+(t==null?0:+t),!this._next&&Y!==this&&(Y?Y._next=this:te=this,Y=this),this._call=e,this._time=r,oe()},stop:function(){this._call&&(this._call=null,this._time=1/0,oe())}};function Ce(e,t,r){var n=new ue;return n.restart(e,t,r),n}function Qe(){qe(),++V;for(var e=te,t;e;)(t=H-e._time)>=0&&e._call.call(void 0,t),e=e._next;--V}function _e(){H=(re=Z.now())+ne,V=X=0;try{Qe()}finally{V=0,Ue(),H=0}}function We(){var e=Z.now(),t=e-re;t>be&&(ne-=t,re=e)}function Ue(){for(var e,t=te,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:te=r);Y=e,oe(n)}function oe(e){if(!V){X&&(X=clearTimeout(X));var t=e-H;t>24?(e<1/0&&(X=setTimeout(_e,e-Z.now()-ne)),J&&(J=clearInterval(J))):(J||(re=Z.now(),J=setInterval(We,be)),V=1,Ie(_e))}}function Ke(e){const t=+this._x.call(null,e),r=+this._y.call(null,e);return ke(this.cover(t,r),t,r,e)}function ke(e,t,r,n){if(isNaN(t)||isNaN(r))return e;var a,i=e._root,u={data:n},o=e._x0,l=e._y0,h=e._x1,c=e._y1,f,g,p,v,d,_,s,m;if(!i)return e._root=u,e;for(;i.length;)if((d=t>=(f=(o+h)/2))?o=f:h=f,(_=r>=(g=(l+c)/2))?l=g:c=g,a=i,!(i=i[s=_<<1|d]))return a[s]=u,e;if(p=+e._x.call(null,i.data),v=+e._y.call(null,i.data),t===p&&r===v)return u.next=i,a?a[s]=u:e._root=u,e;do a=a?a[s]=new Array(4):e._root=new Array(4),(d=t>=(f=(o+h)/2))?o=f:h=f,(_=r>=(g=(l+c)/2))?l=g:c=g;while((s=_<<1|d)===(m=(v>=g)<<1|p>=f));return a[m]=i,a[s]=u,e}function et(e){var t,r,n=e.length,a,i,u=new Array(n),o=new Array(n),l=1/0,h=1/0,c=-1/0,f=-1/0;for(r=0;r<n;++r)isNaN(a=+this._x.call(null,t=e[r]))||isNaN(i=+this._y.call(null,t))||(u[r]=a,o[r]=i,a<l&&(l=a),a>c&&(c=a),i<h&&(h=i),i>f&&(f=i));if(l>c||h>f)return this;for(this.cover(l,h).cover(c,f),r=0;r<n;++r)ke(this,u[r],o[r],e[r]);return this}function tt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,n=this._y0,a=this._x1,i=this._y1;if(isNaN(r))a=(r=Math.floor(e))+1,i=(n=Math.floor(t))+1;else{for(var u=a-r||1,o=this._root,l,h;r>e||e>=a||n>t||t>=i;)switch(h=(t<n)<<1|e<r,l=new Array(4),l[h]=o,o=l,u*=2,h){case 0:a=r+u,i=n+u;break;case 1:r=a-u,i=n+u;break;case 2:a=r+u,n=i-u;break;case 3:r=a-u,n=i-u;break}this._root&&this._root.length&&(this._root=o)}return this._x0=r,this._y0=n,this._x1=a,this._y1=i,this}function rt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function nt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function B(e,t,r,n,a){this.node=e,this.x0=t,this.y0=r,this.x1=n,this.y1=a}function at(e,t,r){var n,a=this._x0,i=this._y0,u,o,l,h,c=this._x1,f=this._y1,g=[],p=this._root,v,d;for(p&&g.push(new B(p,a,i,c,f)),r==null?r=1/0:(a=e-r,i=t-r,c=e+r,f=t+r,r*=r);v=g.pop();)if(!(!(p=v.node)||(u=v.x0)>c||(o=v.y0)>f||(l=v.x1)<a||(h=v.y1)<i))if(p.length){var _=(u+l)/2,s=(o+h)/2;g.push(new B(p[3],_,s,l,h),new B(p[2],u,s,_,h),new B(p[1],_,o,l,s),new B(p[0],u,o,_,s)),(d=(t>=s)<<1|e>=_)&&(v=g[g.length-1],g[g.length-1]=g[g.length-1-d],g[g.length-1-d]=v)}else{var m=e-+this._x.call(null,p.data),y=t-+this._y.call(null,p.data),w=m*m+y*y;if(w<r){var x=Math.sqrt(r=w);a=e-x,i=t-x,c=e+x,f=t+x,n=p.data}}return n}function it(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,r=this._root,n,a,i,u=this._x0,o=this._y0,l=this._x1,h=this._y1,c,f,g,p,v,d,_,s;if(!r)return this;if(r.length)for(;;){if((v=c>=(g=(u+l)/2))?u=g:l=g,(d=f>=(p=(o+h)/2))?o=p:h=p,t=r,!(r=r[_=d<<1|v]))return this;if(!r.length)break;(t[_+1&3]||t[_+2&3]||t[_+3&3])&&(n=t,s=_)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(i=r.next)&&delete r.next,a?(i?a.next=i:delete a.next,this):t?(i?t[_]=i:delete t[_],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(n?n[s]=r:this._root=r),this):(this._root=i,this)}function ut(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function ot(){return this._root}function st(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function lt(e){var t=[],r,n=this._root,a,i,u,o,l;for(n&&t.push(new B(n,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(n=r.node,i=r.x0,u=r.y0,o=r.x1,l=r.y1)&&n.length){var h=(i+o)/2,c=(u+l)/2;(a=n[3])&&t.push(new B(a,h,c,o,l)),(a=n[2])&&t.push(new B(a,i,c,h,l)),(a=n[1])&&t.push(new B(a,h,u,o,c)),(a=n[0])&&t.push(new B(a,i,u,h,c))}return this}function ct(e){var t=[],r=[],n;for(this._root&&t.push(new B(this._root,this._x0,this._y0,this._x1,this._y1));n=t.pop();){var a=n.node;if(a.length){var i,u=n.x0,o=n.y0,l=n.x1,h=n.y1,c=(u+l)/2,f=(o+h)/2;(i=a[0])&&t.push(new B(i,u,o,c,f)),(i=a[1])&&t.push(new B(i,c,o,l,f)),(i=a[2])&&t.push(new B(i,u,f,c,h)),(i=a[3])&&t.push(new B(i,c,f,l,h))}r.push(n)}for(;n=r.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this}function ht(e){return e[0]}function ft(e){return arguments.length?(this._x=e,this):this._x}function gt(e){return e[1]}function vt(e){return arguments.length?(this._y=e,this):this._y}function se(e,t,r){var n=new le(t??ht,r??gt,NaN,NaN,NaN,NaN);return e==null?n:n.addAll(e)}function le(e,t,r,n,a,i){this._x=e,this._y=t,this._x0=r,this._y0=n,this._x1=a,this._y1=i,this._root=void 0}function ye(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var T=se.prototype=le.prototype;T.copy=function(){var e=new le(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,n;if(!t)return e;if(!t.length)return e._root=ye(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var a=0;a<4;++a)(n=t.source[a])&&(n.length?r.push({source:n,target:t.target[a]=new Array(4)}):t.target[a]=ye(n));return e};T.add=Ke;T.addAll=et;T.cover=tt;T.data=rt;T.extent=nt;T.find=at;T.remove=it;T.removeAll=ut;T.root=ot;T.size=st;T.visit=lt;T.visitAfter=ct;T.x=ft;T.y=vt;function pt(e,t,r){var n,a=1;e==null&&(e=0),t==null&&(t=0),r==null&&(r=0);function i(){var u,o=n.length,l,h=0,c=0,f=0;for(u=0;u<o;++u)l=n[u],h+=l.x||0,c+=l.y||0,f+=l.z||0;for(h=(h/o-e)*a,c=(c/o-t)*a,f=(f/o-r)*a,u=0;u<o;++u)l=n[u],h&&(l.x-=h),c&&(l.y-=c),f&&(l.z-=f)}return i.initialize=function(u){n=u},i.x=function(u){return arguments.length?(e=+u,i):e},i.y=function(u){return arguments.length?(t=+u,i):t},i.z=function(u){return arguments.length?(r=+u,i):r},i.strength=function(u){return arguments.length?(a=+u,i):a},i}function xt(e){const t=+this._x.call(null,e);return Be(this.cover(t),t,e)}function Be(e,t,r){if(isNaN(t))return e;var n,a=e._root,i={data:r},u=e._x0,o=e._x1,l,h,c,f,g;if(!a)return e._root=i,e;for(;a.length;)if((c=t>=(l=(u+o)/2))?u=l:o=l,n=a,!(a=a[f=+c]))return n[f]=i,e;if(h=+e._x.call(null,a.data),t===h)return i.next=a,n?n[f]=i:e._root=i,e;do n=n?n[f]=new Array(2):e._root=new Array(2),(c=t>=(l=(u+o)/2))?u=l:o=l;while((f=+c)==(g=+(h>=l)));return n[g]=a,n[f]=i,e}function _t(e){Array.isArray(e)||(e=Array.from(e));const t=e.length,r=new Float64Array(t);let n=1/0,a=-1/0;for(let i=0,u;i<t;++i)isNaN(u=+this._x.call(null,e[i]))||(r[i]=u,u<n&&(n=u),u>a&&(a=u));if(n>a)return this;this.cover(n).cover(a);for(let i=0;i<t;++i)Be(this,r[i],e[i]);return this}function yt(e){if(isNaN(e=+e))return this;var t=this._x0,r=this._x1;if(isNaN(t))r=(t=Math.floor(e))+1;else{for(var n=r-t||1,a=this._root,i,u;t>e||e>=r;)switch(u=+(e<t),i=new Array(2),i[u]=a,a=i,n*=2,u){case 0:r=t+n;break;case 1:t=r-n;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._x1=r,this}function wt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function dt(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function S(e,t,r){this.node=e,this.x0=t,this.x1=r}function mt(e,t){var r,n=this._x0,a,i,u=this._x1,o=[],l=this._root,h,c;for(l&&o.push(new S(l,n,u)),t==null?t=1/0:(n=e-t,u=e+t);h=o.pop();)if(!(!(l=h.node)||(a=h.x0)>u||(i=h.x1)<n))if(l.length){var f=(a+i)/2;o.push(new S(l[1],f,i),new S(l[0],a,f)),(c=+(e>=f))&&(h=o[o.length-1],o[o.length-1]=o[o.length-1-c],o[o.length-1-c]=h)}else{var g=Math.abs(e-+this._x.call(null,l.data));g<t&&(t=g,n=e-g,u=e+g,r=l.data)}return r}function zt(e){if(isNaN(l=+this._x.call(null,e)))return this;var t,r=this._root,n,a,i,u=this._x0,o=this._x1,l,h,c,f,g;if(!r)return this;if(r.length)for(;;){if((c=l>=(h=(u+o)/2))?u=h:o=h,t=r,!(r=r[f=+c]))return this;if(!r.length)break;t[f+1&1]&&(n=t,g=f)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(i=r.next)&&delete r.next,a?(i?a.next=i:delete a.next,this):t?(i?t[f]=i:delete t[f],(r=t[0]||t[1])&&r===(t[1]||t[0])&&!r.length&&(n?n[g]=r:this._root=r),this):(this._root=i,this)}function Mt(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function Nt(){return this._root}function At(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function $t(e){var t=[],r,n=this._root,a,i,u;for(n&&t.push(new S(n,this._x0,this._x1));r=t.pop();)if(!e(n=r.node,i=r.x0,u=r.x1)&&n.length){var o=(i+u)/2;(a=n[1])&&t.push(new S(a,o,u)),(a=n[0])&&t.push(new S(a,i,o))}return this}function bt(e){var t=[],r=[],n;for(this._root&&t.push(new S(this._root,this._x0,this._x1));n=t.pop();){var a=n.node;if(a.length){var i,u=n.x0,o=n.x1,l=(u+o)/2;(i=a[0])&&t.push(new S(i,u,l)),(i=a[1])&&t.push(new S(i,l,o))}r.push(n)}for(;n=r.pop();)e(n.node,n.x0,n.x1);return this}function It(e){return e[0]}function qt(e){return arguments.length?(this._x=e,this):this._x}function ce(e,t){var r=new he(t??It,NaN,NaN);return e==null?r:r.addAll(e)}function he(e,t,r){this._x=e,this._x0=t,this._x1=r,this._root=void 0}function we(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var j=ce.prototype=he.prototype;j.copy=function(){var e=new he(this._x,this._x0,this._x1),t=this._root,r,n;if(!t)return e;if(!t.length)return e._root=we(t),e;for(r=[{source:t,target:e._root=new Array(2)}];t=r.pop();)for(var a=0;a<2;++a)(n=t.source[a])&&(n.length?r.push({source:n,target:t.target[a]=new Array(2)}):t.target[a]=we(n));return e};j.add=xt;j.addAll=_t;j.cover=yt;j.data=wt;j.extent=dt;j.find=mt;j.remove=zt;j.removeAll=Mt;j.root=Nt;j.size=At;j.visit=$t;j.visitAfter=bt;j.x=qt;function Ct(e){const t=+this._x.call(null,e),r=+this._y.call(null,e),n=+this._z.call(null,e);return Te(this.cover(t,r,n),t,r,n,e)}function Te(e,t,r,n,a){if(isNaN(t)||isNaN(r)||isNaN(n))return e;var i,u=e._root,o={data:a},l=e._x0,h=e._y0,c=e._z0,f=e._x1,g=e._y1,p=e._z1,v,d,_,s,m,y,w,x,z,M,N;if(!u)return e._root=o,e;for(;u.length;)if((w=t>=(v=(l+f)/2))?l=v:f=v,(x=r>=(d=(h+g)/2))?h=d:g=d,(z=n>=(_=(c+p)/2))?c=_:p=_,i=u,!(u=u[M=z<<2|x<<1|w]))return i[M]=o,e;if(s=+e._x.call(null,u.data),m=+e._y.call(null,u.data),y=+e._z.call(null,u.data),t===s&&r===m&&n===y)return o.next=u,i?i[M]=o:e._root=o,e;do i=i?i[M]=new Array(8):e._root=new Array(8),(w=t>=(v=(l+f)/2))?l=v:f=v,(x=r>=(d=(h+g)/2))?h=d:g=d,(z=n>=(_=(c+p)/2))?c=_:p=_;while((M=z<<2|x<<1|w)===(N=(y>=_)<<2|(m>=d)<<1|s>=v));return i[N]=u,i[M]=o,e}function kt(e){Array.isArray(e)||(e=Array.from(e));const t=e.length,r=new Float64Array(t),n=new Float64Array(t),a=new Float64Array(t);let i=1/0,u=1/0,o=1/0,l=-1/0,h=-1/0,c=-1/0;for(let f=0,g,p,v,d;f<t;++f)isNaN(p=+this._x.call(null,g=e[f]))||isNaN(v=+this._y.call(null,g))||isNaN(d=+this._z.call(null,g))||(r[f]=p,n[f]=v,a[f]=d,p<i&&(i=p),p>l&&(l=p),v<u&&(u=v),v>h&&(h=v),d<o&&(o=d),d>c&&(c=d));if(i>l||u>h||o>c)return this;this.cover(i,u,o).cover(l,h,c);for(let f=0;f<t;++f)Te(this,r[f],n[f],a[f],e[f]);return this}function Bt(e,t,r){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(r=+r))return this;var n=this._x0,a=this._y0,i=this._z0,u=this._x1,o=this._y1,l=this._z1;if(isNaN(n))u=(n=Math.floor(e))+1,o=(a=Math.floor(t))+1,l=(i=Math.floor(r))+1;else{for(var h=u-n||1,c=this._root,f,g;n>e||e>=u||a>t||t>=o||i>r||r>=l;)switch(g=(r<i)<<2|(t<a)<<1|e<n,f=new Array(8),f[g]=c,c=f,h*=2,g){case 0:u=n+h,o=a+h,l=i+h;break;case 1:n=u-h,o=a+h,l=i+h;break;case 2:u=n+h,a=o-h,l=i+h;break;case 3:n=u-h,a=o-h,l=i+h;break;case 4:u=n+h,o=a+h,i=l-h;break;case 5:n=u-h,o=a+h,i=l-h;break;case 6:u=n+h,a=o-h,i=l-h;break;case 7:n=u-h,a=o-h,i=l-h;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=a,this._z0=i,this._x1=u,this._y1=o,this._z1=l,this}function Tt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function jt(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function $(e,t,r,n,a,i,u){this.node=e,this.x0=t,this.y0=r,this.z0=n,this.x1=a,this.y1=i,this.z1=u}function Et(e,t,r,n){var a,i=this._x0,u=this._y0,o=this._z0,l,h,c,f,g,p,v=this._x1,d=this._y1,_=this._z1,s=[],m=this._root,y,w;for(m&&s.push(new $(m,i,u,o,v,d,_)),n==null?n=1/0:(i=e-n,u=t-n,o=r-n,v=e+n,d=t+n,_=r+n,n*=n);y=s.pop();)if(!(!(m=y.node)||(l=y.x0)>v||(h=y.y0)>d||(c=y.z0)>_||(f=y.x1)<i||(g=y.y1)<u||(p=y.z1)<o))if(m.length){var x=(l+f)/2,z=(h+g)/2,M=(c+p)/2;s.push(new $(m[7],x,z,M,f,g,p),new $(m[6],l,z,M,x,g,p),new $(m[5],x,h,M,f,z,p),new $(m[4],l,h,M,x,z,p),new $(m[3],x,z,c,f,g,M),new $(m[2],l,z,c,x,g,M),new $(m[1],x,h,c,f,z,M),new $(m[0],l,h,c,x,z,M)),(w=(r>=M)<<2|(t>=z)<<1|e>=x)&&(y=s[s.length-1],s[s.length-1]=s[s.length-1-w],s[s.length-1-w]=y)}else{var N=e-+this._x.call(null,m.data),C=t-+this._y.call(null,m.data),k=r-+this._z.call(null,m.data),b=N*N+C*C+k*k;if(b<n){var A=Math.sqrt(n=b);i=e-A,u=t-A,o=r-A,v=e+A,d=t+A,_=r+A,a=m.data}}return a}function Pt(e){if(isNaN(g=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e))||isNaN(v=+this._z.call(null,e)))return this;var t,r=this._root,n,a,i,u=this._x0,o=this._y0,l=this._z0,h=this._x1,c=this._y1,f=this._z1,g,p,v,d,_,s,m,y,w,x,z;if(!r)return this;if(r.length)for(;;){if((m=g>=(d=(u+h)/2))?u=d:h=d,(y=p>=(_=(o+c)/2))?o=_:c=_,(w=v>=(s=(l+f)/2))?l=s:f=s,t=r,!(r=r[x=w<<2|y<<1|m]))return this;if(!r.length)break;(t[x+1&7]||t[x+2&7]||t[x+3&7]||t[x+4&7]||t[x+5&7]||t[x+6&7]||t[x+7&7])&&(n=t,z=x)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(i=r.next)&&delete r.next,a?(i?a.next=i:delete a.next,this):t?(i?t[x]=i:delete t[x],(r=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&r===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!r.length&&(n?n[z]=r:this._root=r),this):(this._root=i,this)}function Ft(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function St(){return this._root}function Dt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Lt(e){var t=[],r,n=this._root,a,i,u,o,l,h,c;for(n&&t.push(new $(n,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=t.pop();)if(!e(n=r.node,i=r.x0,u=r.y0,o=r.z0,l=r.x1,h=r.y1,c=r.z1)&&n.length){var f=(i+l)/2,g=(u+h)/2,p=(o+c)/2;(a=n[7])&&t.push(new $(a,f,g,p,l,h,c)),(a=n[6])&&t.push(new $(a,i,g,p,f,h,c)),(a=n[5])&&t.push(new $(a,f,u,p,l,g,c)),(a=n[4])&&t.push(new $(a,i,u,p,f,g,c)),(a=n[3])&&t.push(new $(a,f,g,o,l,h,p)),(a=n[2])&&t.push(new $(a,i,g,o,f,h,p)),(a=n[1])&&t.push(new $(a,f,u,o,l,g,p)),(a=n[0])&&t.push(new $(a,i,u,o,f,g,p))}return this}function Gt(e){var t=[],r=[],n;for(this._root&&t.push(new $(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=t.pop();){var a=n.node;if(a.length){var i,u=n.x0,o=n.y0,l=n.z0,h=n.x1,c=n.y1,f=n.z1,g=(u+h)/2,p=(o+c)/2,v=(l+f)/2;(i=a[0])&&t.push(new $(i,u,o,l,g,p,v)),(i=a[1])&&t.push(new $(i,g,o,l,h,p,v)),(i=a[2])&&t.push(new $(i,u,p,l,g,c,v)),(i=a[3])&&t.push(new $(i,g,p,l,h,c,v)),(i=a[4])&&t.push(new $(i,u,o,v,g,p,f)),(i=a[5])&&t.push(new $(i,g,o,v,h,p,f)),(i=a[6])&&t.push(new $(i,u,p,v,g,c,f)),(i=a[7])&&t.push(new $(i,g,p,v,h,c,f))}r.push(n)}for(;n=r.pop();)e(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this}function Ot(e){return e[0]}function Rt(e){return arguments.length?(this._x=e,this):this._x}function Ht(e){return e[1]}function Vt(e){return arguments.length?(this._y=e,this):this._y}function Jt(e){return e[2]}function Xt(e){return arguments.length?(this._z=e,this):this._z}function fe(e,t,r,n){var a=new ge(t??Ot,r??Ht,n??Jt,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?a:a.addAll(e)}function ge(e,t,r,n,a,i,u,o,l){this._x=e,this._y=t,this._z=r,this._x0=n,this._y0=a,this._z0=i,this._x1=u,this._y1=o,this._z1=l,this._root=void 0}function de(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var q=fe.prototype=ge.prototype;q.copy=function(){var e=new ge(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),t=this._root,r,n;if(!t)return e;if(!t.length)return e._root=de(t),e;for(r=[{source:t,target:e._root=new Array(8)}];t=r.pop();)for(var a=0;a<8;++a)(n=t.source[a])&&(n.length?r.push({source:n,target:t.target[a]=new Array(8)}):t.target[a]=de(n));return e};q.add=Ct;q.addAll=kt;q.cover=Bt;q.data=Tt;q.extent=jt;q.find=Et;q.remove=Pt;q.removeAll=Ft;q.root=St;q.size=Dt;q.visit=Lt;q.visitAfter=Gt;q.x=Rt;q.y=Vt;q.z=Xt;function R(e){return function(){return e}}function E(e){return(e()-.5)*1e-6}function ae(e){return e.x+e.vx}function me(e){return e.y+e.vy}function Yt(e){return e.z+e.vz}function Zt(e){var t,r,n,a,i=1,u=1;typeof e!="function"&&(e=R(e==null?1:+e));function o(){for(var c,f=t.length,g,p,v,d,_,s,m,y=0;y<u;++y)for(g=(r===1?ce(t,ae):r===2?se(t,ae,me):r===3?fe(t,ae,me,Yt):null).visitAfter(l),c=0;c<f;++c)p=t[c],s=n[p.index],m=s*s,v=p.x+p.vx,r>1&&(d=p.y+p.vy),r>2&&(_=p.z+p.vz),g.visit(w);function w(x,z,M,N,C,k,b){var A=[z,M,N,C,k,b],Q=A[0],je=A[1],Ee=A[2],Pe=A[r],Fe=A[r+1],Se=A[r+2],P=x.data,W=x.r,I=s+W;if(P){if(P.index>p.index){var D=v-P.x-P.vx,L=r>1?d-P.y-P.vy:0,G=r>2?_-P.z-P.vz:0,F=D*D+L*L+G*G;F<I*I&&(D===0&&(D=E(a),F+=D*D),r>1&&L===0&&(L=E(a),F+=L*L),r>2&&G===0&&(G=E(a),F+=G*G),F=(I-(F=Math.sqrt(F)))/F*i,p.vx+=(D*=F)*(I=(W*=W)/(m+W)),r>1&&(p.vy+=(L*=F)*I),r>2&&(p.vz+=(G*=F)*I),P.vx-=D*(I=1-I),r>1&&(P.vy-=L*I),r>2&&(P.vz-=G*I))}return}return Q>v+I||Pe<v-I||r>1&&(je>d+I||Fe<d-I)||r>2&&(Ee>_+I||Se<_-I)}}function l(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<Math.pow(2,r);++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function h(){if(t){var c,f=t.length,g;for(n=new Array(f),c=0;c<f;++c)g=t[c],n[g.index]=+e(g,c,t)}}return o.initialize=function(c,...f){t=c,a=f.find(g=>typeof g=="function")||Math.random,r=f.find(g=>[1,2,3].includes(g))||2,h()},o.iterations=function(c){return arguments.length?(u=+c,o):u},o.strength=function(c){return arguments.length?(i=+c,o):i},o.radius=function(c){return arguments.length?(e=typeof c=="function"?c:R(+c),h(),o):e},o}function Qt(e){return e.index}function ze(e,t){var r=e.get(t);if(!r)throw new Error("node not found: "+t);return r}function Wt(e){var t=Qt,r=g,n,a=R(30),i,u,o,l,h,c,f=1;e==null&&(e=[]);function g(s){return 1/Math.min(l[s.source.index],l[s.target.index])}function p(s){for(var m=0,y=e.length;m<f;++m)for(var w=0,x,z,M,N=0,C=0,k=0,b,A;w<y;++w)x=e[w],z=x.source,M=x.target,N=M.x+M.vx-z.x-z.vx||E(c),o>1&&(C=M.y+M.vy-z.y-z.vy||E(c)),o>2&&(k=M.z+M.vz-z.z-z.vz||E(c)),b=Math.sqrt(N*N+C*C+k*k),b=(b-i[w])/b*s*n[w],N*=b,C*=b,k*=b,M.vx-=N*(A=h[w]),o>1&&(M.vy-=C*A),o>2&&(M.vz-=k*A),z.vx+=N*(A=1-A),o>1&&(z.vy+=C*A),o>2&&(z.vz+=k*A)}function v(){if(u){var s,m=u.length,y=e.length,w=new Map(u.map((z,M)=>[t(z,M,u),z])),x;for(s=0,l=new Array(m);s<y;++s)x=e[s],x.index=s,typeof x.source!="object"&&(x.source=ze(w,x.source)),typeof x.target!="object"&&(x.target=ze(w,x.target)),l[x.source.index]=(l[x.source.index]||0)+1,l[x.target.index]=(l[x.target.index]||0)+1;for(s=0,h=new Array(y);s<y;++s)x=e[s],h[s]=l[x.source.index]/(l[x.source.index]+l[x.target.index]);n=new Array(y),d(),i=new Array(y),_()}}function d(){if(u)for(var s=0,m=e.length;s<m;++s)n[s]=+r(e[s],s,e)}function _(){if(u)for(var s=0,m=e.length;s<m;++s)i[s]=+a(e[s],s,e)}return p.initialize=function(s,...m){u=s,c=m.find(y=>typeof y=="function")||Math.random,o=m.find(y=>[1,2,3].includes(y))||2,v()},p.links=function(s){return arguments.length?(e=s,v(),p):e},p.id=function(s){return arguments.length?(t=s,p):t},p.iterations=function(s){return arguments.length?(f=+s,p):f},p.strength=function(s){return arguments.length?(r=typeof s=="function"?s:R(+s),d(),p):r},p.distance=function(s){return arguments.length?(a=typeof s=="function"?s:R(+s),_(),p):a},p}const Ut=1664525,Kt=1013904223,Me=4294967296;function er(){let e=1;return()=>(e=(Ut*e+Kt)%Me)/Me}var Ne=3;function ie(e){return e.x}function Ae(e){return e.y}function tr(e){return e.z}var rr=10,nr=Math.PI*(3-Math.sqrt(5)),ar=Math.PI*20/(9+Math.sqrt(221));function ir(e,t){t=t||2;var r=Math.min(Ne,Math.max(1,Math.round(t))),n,a=1,i=.001,u=1-Math.pow(i,1/300),o=0,l=.6,h=new Map,c=Ce(p),f=$e("tick","end"),g=er();e==null&&(e=[]);function p(){v(),f.call("tick",n),a<i&&(c.stop(),f.call("end",n))}function v(s){var m,y=e.length,w;s===void 0&&(s=1);for(var x=0;x<s;++x)for(a+=(o-a)*u,h.forEach(function(z){z(a)}),m=0;m<y;++m)w=e[m],w.fx==null?w.x+=w.vx*=l:(w.x=w.fx,w.vx=0),r>1&&(w.fy==null?w.y+=w.vy*=l:(w.y=w.fy,w.vy=0)),r>2&&(w.fz==null?w.z+=w.vz*=l:(w.z=w.fz,w.vz=0));return n}function d(){for(var s=0,m=e.length,y;s<m;++s){if(y=e[s],y.index=s,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),y.fz!=null&&(y.z=y.fz),isNaN(y.x)||r>1&&isNaN(y.y)||r>2&&isNaN(y.z)){var w=rr*(r>2?Math.cbrt(.5+s):r>1?Math.sqrt(.5+s):s),x=s*nr,z=s*ar;r===1?y.x=w:r===2?(y.x=w*Math.cos(x),y.y=w*Math.sin(x)):(y.x=w*Math.sin(x)*Math.cos(z),y.y=w*Math.cos(x),y.z=w*Math.sin(x)*Math.sin(z))}(isNaN(y.vx)||r>1&&isNaN(y.vy)||r>2&&isNaN(y.vz))&&(y.vx=0,r>1&&(y.vy=0),r>2&&(y.vz=0))}}function _(s){return s.initialize&&s.initialize(e,g,r),s}return d(),n={tick:v,restart:function(){return c.restart(p),n},stop:function(){return c.stop(),n},numDimensions:function(s){return arguments.length?(r=Math.min(Ne,Math.max(1,Math.round(s))),h.forEach(_),n):r},nodes:function(s){return arguments.length?(e=s,d(),h.forEach(_),n):e},alpha:function(s){return arguments.length?(a=+s,n):a},alphaMin:function(s){return arguments.length?(i=+s,n):i},alphaDecay:function(s){return arguments.length?(u=+s,n):+u},alphaTarget:function(s){return arguments.length?(o=+s,n):o},velocityDecay:function(s){return arguments.length?(l=1-s,n):1-l},randomSource:function(s){return arguments.length?(g=s,h.forEach(_),n):g},force:function(s,m){return arguments.length>1?(m==null?h.delete(s):h.set(s,_(m)),n):h.get(s)},find:function(){var s=Array.prototype.slice.call(arguments),m=s.shift()||0,y=(r>1?s.shift():null)||0,w=(r>2?s.shift():null)||0,x=s.shift()||1/0,z=0,M=e.length,N,C,k,b,A,Q;for(x*=x,z=0;z<M;++z)A=e[z],N=m-A.x,C=y-(A.y||0),k=w-(A.z||0),b=N*N+C*C+k*k,b<x&&(Q=A,x=b);return Q},on:function(s,m){return arguments.length>1?(f.on(s,m),n):f.on(s)}}}function ur(){var e,t,r,n,a,i=R(-30),u,o=1,l=1/0,h=.81;function c(v){var d,_=e.length,s=(t===1?ce(e,ie):t===2?se(e,ie,Ae):t===3?fe(e,ie,Ae,tr):null).visitAfter(g);for(a=v,d=0;d<_;++d)r=e[d],s.visit(p)}function f(){if(e){var v,d=e.length,_;for(u=new Array(d),v=0;v<d;++v)_=e[v],u[_.index]=+i(_,v,e)}}function g(v){var d=0,_,s,m=0,y,w,x,z,M=v.length;if(M){for(y=w=x=z=0;z<M;++z)(_=v[z])&&(s=Math.abs(_.value))&&(d+=_.value,m+=s,y+=s*(_.x||0),w+=s*(_.y||0),x+=s*(_.z||0));d*=Math.sqrt(4/M),v.x=y/m,t>1&&(v.y=w/m),t>2&&(v.z=x/m)}else{_=v,_.x=_.data.x,t>1&&(_.y=_.data.y),t>2&&(_.z=_.data.z);do d+=u[_.data.index];while(_=_.next)}v.value=d}function p(v,d,_,s,m){if(!v.value)return!0;var y=[_,s,m][t-1],w=v.x-r.x,x=t>1?v.y-r.y:0,z=t>2?v.z-r.z:0,M=y-d,N=w*w+x*x+z*z;if(M*M/h<N)return N<l&&(w===0&&(w=E(n),N+=w*w),t>1&&x===0&&(x=E(n),N+=x*x),t>2&&z===0&&(z=E(n),N+=z*z),N<o&&(N=Math.sqrt(o*N)),r.vx+=w*v.value*a/N,t>1&&(r.vy+=x*v.value*a/N),t>2&&(r.vz+=z*v.value*a/N)),!0;if(v.length||N>=l)return;(v.data!==r||v.next)&&(w===0&&(w=E(n),N+=w*w),t>1&&x===0&&(x=E(n),N+=x*x),t>2&&z===0&&(z=E(n),N+=z*z),N<o&&(N=Math.sqrt(o*N)));do v.data!==r&&(M=u[v.data.index]*a/N,r.vx+=w*M,t>1&&(r.vy+=x*M),t>2&&(r.vz+=z*M));while(v=v.next)}return c.initialize=function(v,...d){e=v,n=d.find(_=>typeof _=="function")||Math.random,t=d.find(_=>[1,2,3].includes(_))||2,f()},c.strength=function(v){return arguments.length?(i=typeof v=="function"?v:R(+v),f(),c):i},c.distanceMin=function(v){return arguments.length?(o=v*v,c):Math.sqrt(o)},c.distanceMax=function(v){return arguments.length?(l=v*v,c):Math.sqrt(l)},c.theta=function(v){return arguments.length?(h=v*v,c):Math.sqrt(h)},c}const or=[{name:"Myriel",group:1,index:0},{name:"Napoleon",group:1,index:1},{name:"Mlle.Baptistine",group:1,index:2},{name:"Mme.Magloire",group:1,index:3},{name:"CountessdeLo",group:1,index:4},{name:"Geborand",group:1,index:5},{name:"Champtercier",group:1,index:6},{name:"Cravatte",group:1,index:7},{name:"Count",group:1,index:8},{name:"OldMan",group:1,index:9},{name:"Labarre",group:2,index:10},{name:"Valjean",group:2,index:11},{name:"Marguerite",group:3,index:12},{name:"Mme.deR",group:2,index:13},{name:"Isabeau",group:2,index:14},{name:"Gervais",group:2,index:15},{name:"Tholomyes",group:3,index:16},{name:"Listolier",group:3,index:17},{name:"Fameuil",group:3,index:18},{name:"Blacheville",group:3,index:19},{name:"Favourite",group:3,index:20},{name:"Dahlia",group:3,index:21},{name:"Zephine",group:3,index:22},{name:"Fantine",group:3,index:23},{name:"Mme.Thenardier",group:4,index:24},{name:"Thenardier",group:4,index:25},{name:"Cosette",group:5,index:26},{name:"Javert",group:4,index:27},{name:"Fauchelevent",group:0,index:28},{name:"Bamatabois",group:2,index:29},{name:"Perpetue",group:3,index:30},{name:"Simplice",group:2,index:31},{name:"Scaufflaire",group:2,index:32},{name:"Woman1",group:2,index:33},{name:"Judge",group:2,index:34},{name:"Champmathieu",group:2,index:35},{name:"Brevet",group:2,index:36},{name:"Chenildieu",group:2,index:37},{name:"Cochepaille",group:2,index:38},{name:"Pontmercy",group:4,index:39},{name:"Boulatruelle",group:6,index:40},{name:"Eponine",group:4,index:41},{name:"Anzelma",group:4,index:42},{name:"Woman2",group:5,index:43},{name:"MotherInnocent",group:0,index:44},{name:"Gribier",group:0,index:45},{name:"Jondrette",group:7,index:46},{name:"Mme.Burgon",group:7,index:47},{name:"Gavroche",group:8,index:48},{name:"Gillenormand",group:5,index:49},{name:"Magnon",group:5,index:50},{name:"Mlle.Gillenormand",group:5,index:51},{name:"Mme.Pontmercy",group:5,index:52},{name:"Mlle.Vaubois",group:5,index:53},{name:"Lt.Gillenormand",group:5,index:54},{name:"Marius",group:8,index:55},{name:"BaronessT",group:5,index:56},{name:"Mabeuf",group:8,index:57},{name:"Enjolras",group:8,index:58},{name:"Combeferre",group:8,index:59},{name:"Prouvaire",group:8,index:60},{name:"Feuilly",group:8,index:61},{name:"Courfeyrac",group:8,index:62},{name:"Bahorel",group:8,index:63},{name:"Bossuet",group:8,index:64},{name:"Joly",group:8,index:65},{name:"Grantaire",group:8,index:66},{name:"MotherPlutarch",group:9,index:67},{name:"Gueulemer",group:4,index:68},{name:"Babet",group:4,index:69},{name:"Claquesous",group:4,index:70},{name:"Montparnasse",group:4,index:71},{name:"Toussaint",group:5,index:72},{name:"Child1",group:10,index:73},{name:"Child2",group:10,index:74},{name:"Brujon",group:4,index:75},{name:"Mme.Hucheloup",group:8,index:76}],sr=[{source:1,target:0,value:1},{source:2,target:0,value:8},{source:3,target:0,value:10},{source:3,target:2,value:6},{source:4,target:0,value:1},{source:5,target:0,value:1},{source:6,target:0,value:1},{source:7,target:0,value:1},{source:8,target:0,value:2},{source:9,target:0,value:1},{source:11,target:10,value:1},{source:11,target:3,value:3},{source:11,target:2,value:3},{source:11,target:0,value:5},{source:12,target:11,value:1},{source:13,target:11,value:1},{source:14,target:11,value:1},{source:15,target:11,value:1},{source:17,target:16,value:4},{source:18,target:16,value:4},{source:18,target:17,value:4},{source:19,target:16,value:4},{source:19,target:17,value:4},{source:19,target:18,value:4},{source:20,target:16,value:3},{source:20,target:17,value:3},{source:20,target:18,value:3},{source:20,target:19,value:4},{source:21,target:16,value:3},{source:21,target:17,value:3},{source:21,target:18,value:3},{source:21,target:19,value:3},{source:21,target:20,value:5},{source:22,target:16,value:3},{source:22,target:17,value:3},{source:22,target:18,value:3},{source:22,target:19,value:3},{source:22,target:20,value:4},{source:22,target:21,value:4},{source:23,target:16,value:3},{source:23,target:17,value:3},{source:23,target:18,value:3},{source:23,target:19,value:3},{source:23,target:20,value:4},{source:23,target:21,value:4},{source:23,target:22,value:4},{source:23,target:12,value:2},{source:23,target:11,value:9},{source:24,target:23,value:2},{source:24,target:11,value:7},{source:25,target:24,value:13},{source:25,target:23,value:1},{source:25,target:11,value:12},{source:26,target:24,value:4},{source:26,target:11,value:31},{source:26,target:16,value:1},{source:26,target:25,value:1},{source:27,target:11,value:17},{source:27,target:23,value:5},{source:27,target:25,value:5},{source:27,target:24,value:1},{source:27,target:26,value:1},{source:28,target:11,value:8},{source:28,target:27,value:1},{source:29,target:23,value:1},{source:29,target:27,value:1},{source:29,target:11,value:2},{source:30,target:23,value:1},{source:31,target:30,value:2},{source:31,target:11,value:3},{source:31,target:23,value:2},{source:31,target:27,value:1},{source:32,target:11,value:1},{source:33,target:11,value:2},{source:33,target:27,value:1},{source:34,target:11,value:3},{source:34,target:29,value:2},{source:35,target:11,value:3},{source:35,target:34,value:3},{source:35,target:29,value:2},{source:36,target:34,value:2},{source:36,target:35,value:2},{source:36,target:11,value:2},{source:36,target:29,value:1},{source:37,target:34,value:2},{source:37,target:35,value:2},{source:37,target:36,value:2},{source:37,target:11,value:2},{source:37,target:29,value:1},{source:38,target:34,value:2},{source:38,target:35,value:2},{source:38,target:36,value:2},{source:38,target:37,value:2},{source:38,target:11,value:2},{source:38,target:29,value:1},{source:39,target:25,value:1},{source:40,target:25,value:1},{source:41,target:24,value:2},{source:41,target:25,value:3},{source:42,target:41,value:2},{source:42,target:25,value:2},{source:42,target:24,value:1},{source:43,target:11,value:3},{source:43,target:26,value:1},{source:43,target:27,value:1},{source:44,target:28,value:3},{source:44,target:11,value:1},{source:45,target:28,value:2},{source:47,target:46,value:1},{source:48,target:47,value:2},{source:48,target:25,value:1},{source:48,target:27,value:1},{source:48,target:11,value:1},{source:49,target:26,value:3},{source:49,target:11,value:2},{source:50,target:49,value:1},{source:50,target:24,value:1},{source:51,target:49,value:9},{source:51,target:26,value:2},{source:51,target:11,value:2},{source:52,target:51,value:1},{source:52,target:39,value:1},{source:53,target:51,value:1},{source:54,target:51,value:2},{source:54,target:49,value:1},{source:54,target:26,value:1},{source:55,target:51,value:6},{source:55,target:49,value:12},{source:55,target:39,value:1},{source:55,target:54,value:1},{source:55,target:26,value:21},{source:55,target:11,value:19},{source:55,target:16,value:1},{source:55,target:25,value:2},{source:55,target:41,value:5},{source:55,target:48,value:4},{source:56,target:49,value:1},{source:56,target:55,value:1},{source:57,target:55,value:1},{source:57,target:41,value:1},{source:57,target:48,value:1},{source:58,target:55,value:7},{source:58,target:48,value:7},{source:58,target:27,value:6},{source:58,target:57,value:1},{source:58,target:11,value:4},{source:59,target:58,value:15},{source:59,target:55,value:5},{source:59,target:48,value:6},{source:59,target:57,value:2},{source:60,target:48,value:1},{source:60,target:58,value:4},{source:60,target:59,value:2},{source:61,target:48,value:2},{source:61,target:58,value:6},{source:61,target:60,value:2},{source:61,target:59,value:5},{source:61,target:57,value:1},{source:61,target:55,value:1},{source:62,target:55,value:9},{source:62,target:58,value:17},{source:62,target:59,value:13},{source:62,target:48,value:7},{source:62,target:57,value:2},{source:62,target:41,value:1},{source:62,target:61,value:6},{source:62,target:60,value:3},{source:63,target:59,value:5},{source:63,target:48,value:5},{source:63,target:62,value:6},{source:63,target:57,value:2},{source:63,target:58,value:4},{source:63,target:61,value:3},{source:63,target:60,value:2},{source:63,target:55,value:1},{source:64,target:55,value:5},{source:64,target:62,value:12},{source:64,target:48,value:5},{source:64,target:63,value:4},{source:64,target:58,value:10},{source:64,target:61,value:6},{source:64,target:60,value:2},{source:64,target:59,value:9},{source:64,target:57,value:1},{source:64,target:11,value:1},{source:65,target:63,value:5},{source:65,target:64,value:7},{source:65,target:48,value:3},{source:65,target:62,value:5},{source:65,target:58,value:5},{source:65,target:61,value:5},{source:65,target:60,value:2},{source:65,target:59,value:5},{source:65,target:57,value:1},{source:65,target:55,value:2},{source:66,target:64,value:3},{source:66,target:58,value:3},{source:66,target:59,value:1},{source:66,target:62,value:2},{source:66,target:65,value:2},{source:66,target:48,value:1},{source:66,target:63,value:1},{source:66,target:61,value:1},{source:66,target:60,value:1},{source:67,target:57,value:3},{source:68,target:25,value:5},{source:68,target:11,value:1},{source:68,target:24,value:1},{source:68,target:27,value:1},{source:68,target:48,value:1},{source:68,target:41,value:1},{source:69,target:25,value:6},{source:69,target:68,value:6},{source:69,target:11,value:1},{source:69,target:24,value:1},{source:69,target:27,value:2},{source:69,target:48,value:1},{source:69,target:41,value:1},{source:70,target:25,value:4},{source:70,target:69,value:4},{source:70,target:68,value:4},{source:70,target:11,value:1},{source:70,target:24,value:1},{source:70,target:27,value:1},{source:70,target:41,value:1},{source:70,target:58,value:1},{source:71,target:27,value:1},{source:71,target:69,value:2},{source:71,target:68,value:2},{source:71,target:70,value:2},{source:71,target:11,value:1},{source:71,target:48,value:1},{source:71,target:41,value:1},{source:71,target:25,value:1},{source:72,target:26,value:2},{source:72,target:27,value:1},{source:72,target:11,value:1},{source:73,target:48,value:2},{source:74,target:48,value:2},{source:74,target:73,value:3},{source:75,target:69,value:3},{source:75,target:68,value:3},{source:75,target:25,value:3},{source:75,target:48,value:1},{source:75,target:41,value:1},{source:75,target:70,value:1},{source:75,target:71,value:1},{source:76,target:64,value:1},{source:76,target:65,value:1},{source:76,target:66,value:1},{source:76,target:63,value:1},{source:76,target:62,value:1},{source:76,target:48,value:1},{source:76,target:58,value:1}],K={nodes:or,links:sr};function gr(e){const t=new De(e);let r=new Le("light1",new O(0,1,0),t);r.diffuse=new U(1,1,1),r.specular=new U(1,1,1),r.groundColor=new U(1,1,1);const n=new Ge("Camera",-(Math.PI/4)*3,Math.PI/4,10,new O(0,0,0),t);n.position=new O(1,1,.17),n.attachControl(!0),n.lowerRadiusLimit=2,n.upperRadiusLimit=10,n.speed=10,n.useBouncingBehavior=!0,n.useAutoRotationBehavior=!0,n.radius=30;const a=Ve(Re("d310").toColor4()),i=ir(K.nodes,3).force("link",Wt(K.links)).force("charge",ur()).force("collide",Zt()).force("center",pt(0,0,0)).on("tick",f).on("end",()=>i.stop());let u=He("container"),o=pe("sphere","node");o.isVisible=!1,o.material=new Oe("mat"),o.material.specularColor=new U(0,0,0),o.registerInstancedBuffer("color",4),o.instancedBuffers.color=new ve(0,0,0,1);let l=u.bindInstance(o,K.nodes).position(g=>new O(g.x,g.y,g.z)).scaling(g=>new O(6,6,6)).id((g,p,v)=>g.id).setInstancedBuffer("color",g=>a(g.group)),h=g=>{let p=[];return g.forEach((v,d)=>{let _=new O(v.source.x,v.source.y,v.source.z),s=new O(v.target.x,v.target.y,v.target.z);p.push([_,s])}),p},c=u.bind("lineSystem",{lines:g=>h(g),updatable:!0},[K.links]).prop("color",new ve(1,1,1,1)).prop("alpha",.3);u.run((g,p)=>{p.normalizeToUnitCube()}).positionY(1);function f(){l.position((g,p,v)=>new O(g.x,g.y,g.z)),c.run((g,p,v)=>pe("lineSystem","edge",{lines:h(g),instance:p,updatable:!0},g))}return n.setTarget(u.selected[0]),window.navigation.addEventListener("navigate",g=>{i.stop()}),t}export{gr as nodelink3d};
